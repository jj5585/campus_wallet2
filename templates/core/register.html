{% extends "core/base.html" %}

{% block content %}
<div style="display:flex; justify-content:center; width:100%; margin-top:40px;">
    <div style="width:420px;">
        <h3 class="text-center mb-2" style="color:#fff; text-align:center;">
            Create Your Campus Wallet
        </h3>
        <p style="text-align:center; color:#9ca3af; font-size:0.9rem; margin-bottom:18px;">
            Sign up as a customer and start using credits at campus stalls.
        </p>

        {% if messages %}
            {% for message in messages %}
                <div class="message">{{ message }}</div>
            {% endfor %}
        {% endif %}

        <form method="post" style="width:100%;">
            {% csrf_token %}

            {# Render each field with nicer labels #}
            {% for field in form %}
                <div style="margin-bottom:10px;">
                    <label class="auth-label" for="{{ field.id_for_label }}">
                        {{ field.label }}
                    </label>
                    {{ field }}
                    {% if field.errors %}
                        <div style="color:#fecaca; font-size:0.8rem; margin-top:3px;">
                            {{ field.errors|striptags }}
                        </div>
                    {% endif %}
                </div>
            {% endfor %}

            <div style="display:flex; align-items:center; justify-content:flex-end; gap:6px; margin-top:4px;">
                <input type="checkbox" id="toggle-password" style="width:auto; margin:0;">
                <label for="toggle-password" class="password-toggle">Show password</label>
            </div>

            <button type="submit" class="btn btn-primary" style="width:100%; margin-top:12px;">
                Sign Up
            </button>
        </form>

        <p class="text-center mt-3" style="color:#bbb; margin-top:16px; text-align:center;">
            Already have an account?
            <a href="{% url 'login' %}" style="color:#4ea8de;">Login</a>
        </p>
    </div>
</div>

<script>
    (function() {
        const checkbox = document.getElementById("toggle-password");
        if (!checkbox) return;

        checkbox.addEventListener("change", function () {
            const pw1 = document.getElementById("id_password1");
            const pw2 = document.getElementById("id_password2");
            const type = this.checked ? "text" : "password";
            if (pw1) pw1.type = type;
            if (pw2) pw2.type = type;
        });
    })();
</script>
{% endblock %}
